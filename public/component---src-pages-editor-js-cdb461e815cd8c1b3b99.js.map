{"version":3,"file":"component---src-pages-editor-js-cdb461e815cd8c1b3b99.js","mappings":"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","sources":["webpack://andys-man-club/./src/pages/editor.js"],"sourcesContent":["import React from 'react'\nimport Page from '../components/Page'\nimport Layout from \"../components/Layout\"\nimport StoryblokService from '../utils/storyblok-service'\nimport { PageContext } from \"src/utils/context\";\nimport ContentHeading from \"src/components/ContentHeading\"\nimport SetCookie from \"src/utils/SetCookie\";\nimport GetCookie from \"src/utils/GetCookie\";\n\nexport default class Editor extends React.Component {\n  state = {\n    story: null,\n    cta_referrer: null,\n    background_color: null,\n  }\n \n  async getInitialStory() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const path = urlParams.get('path')    \n    let { data: { story } } = await StoryblokService.get(`cdn/stories/${path}`, {version: 'draft'})\n    return story\n  }\n \n  async componentDidMount() {\n    let story = await this.getInitialStory()\n    if(story.content) this.setState({ story })\n    setTimeout(() => StoryblokService.initEditor(this), 200)\n    if( this.getCtaReferrer() ) {\n      this.setCtaReferrer(this.getCtaReferrer())\n    } \n  }\n\n  getCtaReferrer = () => {\n    return GetCookie(\"cta_referrer\");\n  }  \n\n  setCtaReferrer = (value) => {\n    SetCookie(`cta_referrer=${value}`)\n    this.setState({ cta_referrer: value })\n  }\n\n  setBackgroundColor = (color) => {\n    this.setState({ background_color: color })\n  }  \n \n  render() {\n    if(this.state.story === null) {\n      return (<div>Loading</div>)\n    }\n    return (\n      <PageContext.Provider\n        value={{\n          currentPage: this.state.story.uuid,\n          location: this.props.location,\n          name: this.state.story.name,\n          first_published_at: this.state.story.first_published_at,\n          content: this.state.story.content,\n          tag_list: this.state.story.tag_list,\n          setCtaReferrer: this.setCtaReferrer,\n          ctaReferrer: this.state.cta_referrer,\n          background_color: this.state.background_color,\n          setBackgroundColor: this.setBackgroundColor,          \n        }}\n      >\n        <Layout location={this.props.location} isEditor={true}>\n          {this.state.story.content.component === 'news_views' &&\n            <ContentHeading/>\n          }\n          <Page blok={this.state.story.content} />\n        </Layout>\n      </PageContext.Provider>\n    )\n  }\n}"],"names":["Editor","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","story","cta_referrer","background_color","getCtaReferrer","GetCookie","setCtaReferrer","value","SetCookie","setState","setBackgroundColor","color","_inheritsLoose","_proto","prototype","getInitialStory","_getInitialStory","_asyncToGenerator","_regeneratorRuntime","_callee","urlParams","path","_yield$StoryblokServi","_context","prev","next","URLSearchParams","window","location","search","get","StoryblokService","version","sent","data","abrupt","stop","componentDidMount","_componentDidMount","_callee2","_this2","_context2","this","content","setTimeout","initEditor","render","React","PageContext","Provider","currentPage","uuid","props","name","first_published_at","tag_list","ctaReferrer","Layout","isEditor","component","ContentHeading","Page","blok"],"sourceRoot":""}