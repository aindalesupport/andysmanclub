{"version":3,"file":"component---src-pages-editor-js-bd25abcb6e77111a9e66.js","mappings":"4RASqBA,EAAAA,SAAAA,GAAAA,SAAAA,IAAAA,IAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GAkClB,OAlCkBA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KAAAA,MACnBC,MAAQ,CACNC,MAAO,KACPC,aAAc,KACdC,iBAAkB,MAHZ,EAsBRC,eAAiB,WACf,OAAOC,EAAAA,EAAAA,GAAU,iBAClB,EAEDC,eAAiB,SAACC,IAChBC,EAAAA,EAAAA,GAAU,gBAAgBD,GAC1B,EAAKE,SAAS,CAAEP,aAAcK,KAC/B,EAEDG,mBAAqB,SAACC,GACpB,EAAKF,SAAS,CAAEN,iBAAkBQ,KACnC,GAlCkBZ,EAAAA,EAAAA,GAAAA,EAAAA,GAkClB,kBA6BA,OA7BA,EA3BKa,gBAAAA,WAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAN,iGACQC,EAAY,IAAIC,gBAAgBC,OAAOC,SAASC,QAChDC,EAAOL,EAAUM,IAAI,QAF7B,SAGkCC,EAAAA,EAAAA,IAAA,eAAoCF,EAAQ,CAACG,QAAS,UAHxF,uBAGgBpB,EAHhB,EAGQqB,KAAQrB,MAHhB,kBAISA,GAJT,6FAAMW,GAAN,EAOMW,kBAAAA,WAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAN,2GACoBC,KAAKZ,kBADzB,QACMX,EADN,QAEWwB,SAASD,KAAKf,SAAS,CAAER,MAAAA,IAClCyB,YAAW,kBAAMN,EAAAA,EAAAA,WAA4B,KAAO,KAChDI,KAAKpB,kBACPoB,KAAKlB,eAAekB,KAAKpB,kBAL7B,kGAAMmB,GAAN,EAsBAI,OAAA,WACE,OAAwB,OAArBH,KAAKxB,MAAMC,MACJ,sCAGR,gBAAC,aAAD,CACEM,MAAO,CACLqB,YAAaJ,KAAKxB,MAAMC,MAAM4B,KAC9Bb,SAAUQ,KAAKM,MAAMd,SACrBe,KAAMP,KAAKxB,MAAMC,MAAM8B,KACvBC,mBAAoBR,KAAKxB,MAAMC,MAAM+B,mBACrCP,QAASD,KAAKxB,MAAMC,MAAMwB,QAC1BQ,SAAUT,KAAKxB,MAAMC,MAAMgC,SAC3B3B,eAAgBkB,KAAKlB,eACrB4B,YAAaV,KAAKxB,MAAME,aACxBC,iBAAkBqB,KAAKxB,MAAMG,iBAC7BO,mBAAoBc,KAAKd,qBAG3B,gBAAC,IAAD,CAAQM,SAAUQ,KAAKM,MAAMd,SAAUmB,UAAU,GACP,eAAvCX,KAAKxB,MAAMC,MAAMwB,QAAQW,WACxB,gBAAC,IAAD,MAEF,gBAAC,IAAD,CAAMC,KAAMb,KAAKxB,MAAMC,MAAMwB,aAIpC,EA/DkB1B,CAAeuC,EAAAA","sources":["webpack://andys-man-club/./src/pages/editor.js"],"sourcesContent":["import React from 'react'\nimport Page from '../components/Page'\nimport Layout from \"../components/Layout\"\nimport StoryblokService from '../utils/storyblok-service'\nimport { PageContext } from \"src/utils/context\";\nimport ContentHeading from \"src/components/ContentHeading\"\nimport SetCookie from \"src/utils/SetCookie\";\nimport GetCookie from \"src/utils/GetCookie\";\n\nexport default class Editor extends React.Component {\n  state = {\n    story: null,\n    cta_referrer: null,\n    background_color: null,\n  }\n \n  async getInitialStory() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const path = urlParams.get('path')    \n    let { data: { story } } = await StoryblokService.get(`cdn/stories/${path}`, {version: 'draft'})\n    return story\n  }\n \n  async componentDidMount() {\n    let story = await this.getInitialStory()\n    if(story.content) this.setState({ story })\n    setTimeout(() => StoryblokService.initEditor(this), 200)\n    if( this.getCtaReferrer() ) {\n      this.setCtaReferrer(this.getCtaReferrer())\n    } \n  }\n\n  getCtaReferrer = () => {\n    return GetCookie(\"cta_referrer\");\n  }  \n\n  setCtaReferrer = (value) => {\n    SetCookie(`cta_referrer=${value}`)\n    this.setState({ cta_referrer: value })\n  }\n\n  setBackgroundColor = (color) => {\n    this.setState({ background_color: color })\n  }  \n \n  render() {\n    if(this.state.story === null) {\n      return (<div>Loading</div>)\n    }\n    return (\n      <PageContext.Provider\n        value={{\n          currentPage: this.state.story.uuid,\n          location: this.props.location,\n          name: this.state.story.name,\n          first_published_at: this.state.story.first_published_at,\n          content: this.state.story.content,\n          tag_list: this.state.story.tag_list,\n          setCtaReferrer: this.setCtaReferrer,\n          ctaReferrer: this.state.cta_referrer,\n          background_color: this.state.background_color,\n          setBackgroundColor: this.setBackgroundColor,          \n        }}\n      >\n        <Layout location={this.props.location} isEditor={true}>\n          {this.state.story.content.component === 'news_views' &&\n            <ContentHeading/>\n          }\n          <Page blok={this.state.story.content} />\n        </Layout>\n      </PageContext.Provider>\n    )\n  }\n}"],"names":["Editor","state","story","cta_referrer","background_color","getCtaReferrer","GetCookie","setCtaReferrer","value","SetCookie","setState","setBackgroundColor","color","getInitialStory","urlParams","URLSearchParams","window","location","search","path","get","StoryblokService","version","data","componentDidMount","this","content","setTimeout","render","currentPage","uuid","props","name","first_published_at","tag_list","ctaReferrer","isEditor","component","blok","React"],"sourceRoot":""}