{"version":3,"file":"component---src-pages-index-js-1b375e19402322f362eb.js","mappings":"kRASqBA,EAAAA,SAAAA,GAAAA,SAAAA,IAAAA,IAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,IAAAA,MAAAA,GAAAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAAA,GAAAA,UAAAA,GAmClB,OAnCkBA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,CAAAA,MAAAA,OAAAA,KAAAA,MACnBC,MAAQ,CACNC,MAAO,CACJC,QAAS,EAAKC,MAAMC,KAAKH,MAAQI,KAAKC,MAAM,EAAKH,MAAMC,KAAKH,MAAMC,SAAW,GAC7EK,aAAc,MAEjBC,iBAAkB,YALZ,EAuBRC,eAAiB,WACf,OAAOC,EAAAA,EAAAA,GAAU,iBAClB,EAEDC,eAAiB,SAACC,IAChBC,EAAAA,EAAAA,GAAU,gBAAgBD,GAC1B,EAAKE,SAAS,CAAEP,aAAcK,KAC/B,EAEDG,mBAAqB,SAACC,GACpB,EAAKF,SAAS,CAAEN,iBAAkBQ,KACnC,GAnCkBjB,EAAAA,EAAAA,GAAAA,EAAAA,GAmClB,kBAuBA,OAvBA,EA1BKkB,gBAAAA,WAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAN,6FACEC,EAAAA,EAAAA,SAA0BC,KAAKhB,MAAMiB,SAASC,QADhD,SAEkCH,EAAAA,EAAAA,IAAA,eAAoCC,KAAKhB,MAAMC,KAAKH,MAAMqB,WAF5F,uBAEgBrB,EAFhB,EAEQG,KAAQH,MAFhB,kBAGSA,GAHT,kGAAMgB,GAAN,EAMMM,kBAAAA,WAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAN,2GACoBJ,KAAKF,kBADzB,QACMhB,EADN,QAEWC,SAASiB,KAAKL,SAAS,CAAEb,MAAAA,IAClCuB,YAAW,kBAAMN,EAAAA,EAAAA,WAA4B,KAAO,KAChDC,KAAKV,kBACPU,KAAKR,eAAeQ,KAAKV,kBAL7B,kGAAMc,GAAN,EAsBAE,OAAA,WACE,OACE,gBAAC,aAAD,CACEb,MAAO,CACLc,YAAaP,KAAKnB,MAAMC,MAAM0B,KAC9BP,SAAUD,KAAKhB,MAAMiB,SACrBQ,KAAMT,KAAKnB,MAAMC,MAAM2B,KACvBC,mBAAoBV,KAAKnB,MAAMC,MAAM4B,mBACrC3B,QAASiB,KAAKnB,MAAMC,MAAMC,QAC1B4B,SAAUX,KAAKnB,MAAMC,MAAM6B,SAC3BnB,eAAgBQ,KAAKR,eACrBoB,YAAaZ,KAAKnB,MAAMO,aACxBC,iBAAkBW,KAAKnB,MAAMQ,iBAC7BO,mBAAoBI,KAAKJ,qBAG3B,gBAAC,IAAD,CAAQK,SAAUD,KAAKhB,MAAMiB,UAC3B,gBAAC,IAAD,CAAMY,KAAMb,KAAKnB,MAAMC,MAAMC,aAIpC,EA1DkBH,CAAckC,EAAAA","sources":["webpack://andys-man-club/./src/pages/index.js"],"sourcesContent":["import React from \"react\"\nimport Page from '../components/Page'\nimport Layout from \"../components/Layout\"\nimport { graphql } from 'gatsby'\nimport StoryblokService from '../utils/storyblok-service'\nimport { PageContext } from \"src/utils/context\";\nimport SetCookie from \"src/utils/SetCookie\";\nimport GetCookie from \"src/utils/GetCookie\";\n \nexport default class Index extends React.Component {\n  state = {\n    story: {\n       content: this.props.data.story ? JSON.parse(this.props.data.story.content) : {},\n       cta_referrer: null,\n    },\n    background_color: \"bg-white\",\n  }\n \n  async getInitialStory() {\n    StoryblokService.setQuery(this.props.location.search)\n    let { data: { story } } = await StoryblokService.get(`cdn/stories/${this.props.data.story.full_slug}`)\n    return story\n  }\n \n  async componentDidMount() {\n    let story = await this.getInitialStory()\n    if(story.content) this.setState({ story })\n    setTimeout(() => StoryblokService.initEditor(this), 200)\n    if( this.getCtaReferrer() ) {\n      this.setCtaReferrer(this.getCtaReferrer())\n    } \n  }\n\n  getCtaReferrer = () => {\n    return GetCookie(\"cta_referrer\");\n  }  \n\n  setCtaReferrer = (value) => {\n    SetCookie(`cta_referrer=${value}`)\n    this.setState({ cta_referrer: value })\n  }\n\n  setBackgroundColor = (color) => {\n    this.setState({ background_color: color })\n  }\n \n  render() {\n    return (\n      <PageContext.Provider\n        value={{\n          currentPage: this.state.story.uuid,\n          location: this.props.location,\n          name: this.state.story.name,\n          first_published_at: this.state.story.first_published_at,\n          content: this.state.story.content,\n          tag_list: this.state.story.tag_list,\n          setCtaReferrer: this.setCtaReferrer,\n          ctaReferrer: this.state.cta_referrer,\n          background_color: this.state.background_color,\n          setBackgroundColor: this.setBackgroundColor,\n        }}\n      >\n        <Layout location={this.props.location}>\n          <Page blok={this.state.story.content} />\n        </Layout>\n      </PageContext.Provider>\n    )\n  }\n}\n \nexport const query = graphql`\n  {\n    story: storyblokEntry(full_slug: { eq: \"home\" }) {\n      name\n      content\n      full_slug\n      uuid\n    }\n  }\n`"],"names":["Index","state","story","content","props","data","JSON","parse","cta_referrer","background_color","getCtaReferrer","GetCookie","setCtaReferrer","value","SetCookie","setState","setBackgroundColor","color","getInitialStory","StoryblokService","this","location","search","full_slug","componentDidMount","setTimeout","render","currentPage","uuid","name","first_published_at","tag_list","ctaReferrer","blok","React"],"sourceRoot":""}